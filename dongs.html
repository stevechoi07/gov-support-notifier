<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>v10.0 | ë‚´ ë™ë„¤ ì ìˆ˜ (ì•ˆì •í™” ë²„ì „)</title>
    <meta name="description" content="ìš°ë¦¬ ë™ë„¤ëŠ” ì‚´ê¸° ì¢‹ì€ ê³³ì¼ê¹Œ? ì£¼ì†Œ ì…ë ¥ë§Œìœ¼ë¡œ ë°˜ê²½ 500m ë‚´ í¸ì˜ì , ì¹´í˜, ë³‘ì› ë“± í¸ì˜ì‹œì„¤ì„ ì¹´ì¹´ì˜¤ë§µ ë°ì´í„°ë¡œ ì •ë°€ ë¶„ì„í•˜ì—¬ 'ë™ë„¤ ì ìˆ˜'ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.">
    <meta name="keywords" content="ë™ë„¤ ì ìˆ˜, ìŠ¬ì„¸ê¶Œ, í¸ì˜ì‹œì„¤, ì‚´ê¸° ì¢‹ì€ ë™ë„¤, ì¹´ì¹´ì˜¤ë§µ, í¸ì˜ì , ì¹´í˜, ë³‘ì›, ê³µì›, ì—­ì„¸ê¶Œ, ì£¼ì†Œ, í™•ì¸, ì¡°íšŒ, ì§€ë„">
    
    <meta property="og:title" content="ë‚´ ë™ë„¤ ì ìˆ˜ v10.0 - ìš°ë¦¬ ë™ë„¤ ìŠ¬ì„¸ê¶Œ ì§€ìˆ˜ëŠ”?">
    <meta property="og:description" content="ì¹´ì¹´ì˜¤ë§µì˜ ì •í™•í•œ ë°ì´í„°ë¡œ ìš°ë¦¬ ë™ë„¤ í¸ì˜ì‹œì„¤ ì ìˆ˜ë¥¼ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!">
    <meta property="og:image" content="https://placehold.co/1200x630/6f42c1/ffffff?text=%F0%9F%92%AF%20%EB%82%B4%20%EB%8F%99%EB%84%A4%20%EC%A0%90%EC%88%98%20v10.0&font=noto-sans-kr">
    <meta property="og:url" content="https://kfund.ai/dongs.html">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=Bdae71c83941e7abbe59827c2625be7b&libraries=services"></script>
    
    <style>
        /* CSS ìŠ¤íƒ€ì¼ì€ v9.0ê³¼ ë™ì¼í•©ë‹ˆë‹¤ */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8f9fa; color: #212529; }
        .main-container { background-color: #ffffff; border: 1px solid #dee2e6; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
        .title-text { color: #0d6efd; }
        .input-field { background-color: #f8f9fa; border-color: #ced4da; color: #212529; }
        .input-field:focus { border-color: #86b7fe; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); }
        .search-button { background-color: #0d6efd; color: #ffffff; transition: all 0.2s ease-in-out; }
        .search-button:hover { background-color: #0b5ed7; transform: translateY(-2px); }
        .search-button:disabled { background-color: #6c757d; cursor: not-allowed; transform: none; }
        .result-card { background-color: #ffffff; border: 1px solid #e9ecef; transition: all 0.2s ease-in-out; }
        .result-card:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        .summary-briefing { background-color: #e7f1ff; border: 1px solid #b6d4fe; color: #0a58ca; }
        .loader { border: 4px solid #dee2e6; border-top: 4px solid #0d6efd; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="main-container w-full max-w-2xl mx-auto rounded-2xl p-6 sm:p-8 space-y-8">
        
        <div class="text-center space-y-2">
            <h1 class="text-2xl sm:text-4xl font-bold title-text whitespace-nowrap">ğŸ’¯ ë‚´ ë™ë„¤ ì ìˆ˜ ğŸ’¯</h1>
            <p class="text-gray-600 text-sm sm:text-base">ì¹´ì¹´ì˜¤ë§µ ë°ì´í„°ë¡œ ì •í™•í•˜ê²Œ ë¶„ì„í•˜ëŠ” ìš°ë¦¬ ë™ë„¤ ìŠ¬ì„¸ê¶Œ ì§€ìˆ˜!</p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
            <input type="text" id="address" placeholder="ë™ë„¤ ì ìˆ˜ê°€ ê¶ê¸ˆí•œ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”!" class="input-field flex-grow p-4 border-2 rounded-lg transition-all duration-300 outline-none text-base" disabled>
            <button id="searchBtn" class="search-button font-bold py-4 px-6 sm:px-8 rounded-lg text-base" disabled>
                ì´ˆê¸°í™” ì¤‘...
            </button>
        </div>

        <div id="result" class="pt-6">
            <div id="initial-message" class="text-center text-gray-500">
                <p>ğŸ›°ï¸ ì¹´ì¹´ì˜¤ë§µ ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ì¤‘...</p>
            </div>
            <div id="loading" class="hidden flex flex-col items-center justify-center space-y-4">
                <div class="loader"></div>
                <p class="text-blue-600 font-semibold">ì¹´ì¹´ì˜¤ë§µì—ì„œ í¸ì˜ì‹œì„¤ ì •ë³´ ìˆ˜ì‹  ì¤‘...</p>
            </div>
            <div id="result-content" class="hidden">
                <h2 id="result-message" class="text-xl sm:text-2xl font-bold text-center mb-6"></h2>
                <div id="map" class="w-full h-80 rounded-lg border-2 border-gray-300 mb-6 hidden"></div>
                <div id="summary-briefing" class="summary-briefing mb-6 p-4 rounded-lg"></div>
                <div id="facility-list" class="space-y-4"></div>
            </div>
        </div>
        
    </div>

    <script>
        const addressInput = document.getElementById('address');
        const searchBtn = document.getElementById('searchBtn');
        const initialMessageDiv = document.getElementById('initial-message');
        const loadingDiv = document.getElementById('loading');
        const resultContentDiv = document.getElementById('result-content');
        const resultMessage = document.getElementById('result-message');
        const summaryBriefing = document.getElementById('summary-briefing');
        const facilityList = document.getElementById('facility-list');
        const mapContainer = document.getElementById('map');

        let geocoderInstance = null;
        let placesInstance = null;
        let map = null;
        let markers = [];

        const amenityConfig = {
            convenience: { name: 'ğŸª í¸ì˜ì ', category: 'CS2', score: 5, icon: 'https://i.postimg.cc/Sx21L718/store.png' },
            cafe: { name: 'â˜• ì¹´í˜', category: 'CE7', score: 3, icon: 'https://i.postimg.cc/pXyT38s5/cafe.png' },
            hospital: { name: 'ğŸ¥ ë³‘ì›/ì•½êµ­', category: 'HP8,PM9', score: 10, icon: 'https://i.postimg.cc/t46n2v0N/hospital.png' },
            park: { name: 'ğŸŒ³ ê³µì›', keyword: 'ê³µì›', score: 8, icon: 'https://i.postimg.cc/d11n0s2w/park.png' },
            subway: { name: 'ğŸš‡ ì§€í•˜ì² ì—­', category: 'SW8', score: 15, icon: 'https://i.postimg.cc/hG12tXyV/subway.png' },
            bank: { name: 'ğŸ¦ ì€í–‰', category: 'BK9', score: 4, icon: 'https://i.postimg.cc/B6m1M9v9/bank.png' },
            default: { name: 'ğŸ“ ê¸°íƒ€ì‹œì„¤', icon: 'https://i.postimg.cc/qR0L186h/default.png' }
        };
        
        kakao.maps.load(() => { try { geocoderInstance = new kakao.maps.services.Geocoder(); placesInstance = new kakao.maps.services.Places(); initializeSearch(); } catch (error) { displayError("ì¹´ì¹´ì˜¤ë§µ ì„œë¹„ìŠ¤ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."); } });
        function initializeSearch() { addressInput.disabled = false; searchBtn.disabled = false; searchBtn.textContent = 'ì ìˆ˜ í™•ì¸'; initialMessageDiv.innerHTML = `<p>ğŸ‘†ğŸ» ìƒë‹¨ì— ì£¼ì†Œë¥¼ ì…ë ¥í•˜ê³  'ì ìˆ˜ í™•ì¸' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>`; searchBtn.addEventListener('click', startSearch); addressInput.addEventListener('keydown', (event) => { if (event.key === 'Enter') startSearch(); }); }
        function clearMap() { markers.forEach(marker => marker.setMap(null)); markers = []; mapContainer.classList.add('hidden'); }
        function startSearch() { const address = addressInput.value; if (!address) { addressInput.classList.add('border-red-500'); setTimeout(() => addressInput.classList.remove('border-red-500'), 1500); return; } initialMessageDiv.classList.add('hidden'); resultContentDiv.classList.add('hidden'); loadingDiv.classList.remove('hidden'); geocoderInstance.addressSearch(address, (result, status) => { if (status === kakao.maps.services.Status.OK) { const lat = result[0].y; const lon = result[0].x; findAllAmenities(lat, lon); } else { displayError('ğŸ˜­ ì£¼ì†Œë¥¼ ì¢Œí‘œë¡œ ë³€í™˜í•˜ëŠ”ë° ì‹¤íŒ¨í–ˆì–´ìš”. ì •í™•í•œ ì£¼ì†Œì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”!'); } }); }
        
        async function findAllAmenities(lat, lon) {
            const searchRadius = 500;
            const searchPromises = [];
            const location = new kakao.maps.LatLng(lat, lon);

            for (const key in amenityConfig) {
                if (key === 'default') continue;
                
                const amenity = amenityConfig[key];
                const promise = new Promise((resolve) => {
                    const options = { location, radius: searchRadius, sort: kakao.maps.services.SortBy.DISTANCE };
                    const callback = (result, status) => {
                        if (status === kakao.maps.services.Status.OK) {
                            resolve(result.map(place => ({ ...place, amenityType: key })));
                        } else {
                            resolve([]);
                        }
                    };

                    if (amenity.keyword) {
                        placesInstance.keywordSearch(amenity.keyword, callback, options);
                    } else if (amenity.category) {
                        // ê° ì¹´í…Œê³ ë¦¬ ì½”ë“œì— ëŒ€í•´ ë³„ë„ì˜ ê²€ìƒ‰ì„ ìˆ˜í–‰í•´ì•¼ í•˜ì§€ë§Œ, ê°„ì†Œí™”ë¥¼ ìœ„í•´ ì²« ë²ˆì§¸ ì½”ë“œë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
                        // ì •í™•ë„ë¥¼ ë†’ì´ë ¤ë©´ amenity.category.split(',').forEach(...) ë¡œì§ì´ í•„ìš”í•©ë‹ˆë‹¤.
                        placesInstance.categorySearch(amenity.category.split(',')[0], callback, options);
                    } else {
                        resolve([]);
                    }
                });
                searchPromises.push(promise);
            }

            try {
                const resultsArray = await Promise.all(searchPromises);
                const allPlaces = resultsArray.flat();
                calculateScoreAndDisplayResults(allPlaces, lat, lon);
            } catch (error) {
                displayError('ğŸ˜­ í¸ì˜ì‹œì„¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.');
            }
        }
        
        function calculateScoreAndDisplayResults(places, centerLat, centerLon) { const results = { totalScore: 0, facilities: [], counts: {} }; const uniquePlaces = new Map(); places.forEach(place => { if (!uniquePlaces.has(place.id)) { uniquePlaces.set(place.id, place); } }); uniquePlaces.forEach(place => { const type = place.amenityType; if (!results.counts[type]) results.counts[type] = 0; results.counts[type]++; results.totalScore += amenityConfig[type].score; results.facilities.push(place); }); if (results.facilities.length > 0) { displaySuccess(results, centerLat, centerLon); } else { displayNotFound(); } }
        function displayResult() { loadingDiv.classList.add('hidden'); resultContentDiv.classList.remove('hidden'); resultContentDiv.classList.add('fade-in'); }
        function displaySuccess(results, centerLat, centerLon) { displayResult(); results.facilities.sort((a, b) => a.distance - b.distance); let scoreMessage = ''; if (results.totalScore >= 100) scoreMessage = `ğŸ¥³ ${results.totalScore}ì ! ì—¬ê¸°ëŠ” ì²œêµ­ì¸ê°€ìš”? ì™„ë²½í•œ ë™ë„¤ë„¤ìš”!`; else if (results.totalScore >= 70) scoreMessage = `ğŸ˜ ${results.totalScore}ì ! ì‚´ê¸° ì¢‹ì€ ë©‹ì§„ ë™ë„¤ì…ë‹ˆë‹¤!`; else if (results.totalScore >= 40) scoreMessage = `ğŸ™‚ ${results.totalScore}ì ! ê´œì°®ì•„ìš”, ì¶©ë¶„íˆ ì¢‹ì€ ë™ë„¤ì˜ˆìš”.`; else scoreMessage = `ğŸ¤” ${results.totalScore}ì ... ì¡°ê¸ˆì€ ì•„ì‰½ì§€ë§Œ, ì •ê²¨ìš´ ìš°ë¦¬ ë™ë„¤!`; resultMessage.innerHTML = scoreMessage; let briefingHTML = `<h3 class="font-bold text-lg mb-2">ğŸ“Š ë‚´ ë™ë„¤ ì ìˆ˜ ì„¸ë¶€ë‚´ì—­</h3><div class="space-y-1 text-sm">`; for(const key in results.counts) { if(results.counts[key] > 0) { briefingHTML += `<div>- ${amenityConfig[key].name}: <strong class="text-gray-800">${results.counts[key]}</strong>ê°œ ë°œê²¬!</div>`; } } briefingHTML += `</div>`; summaryBriefing.innerHTML = briefingHTML; facilityList.innerHTML = ''; results.facilities.forEach(place => { const typeInfo = amenityConfig[place.amenityType]; const cardHTML = `<div class="result-card p-4 rounded-lg"><div class="flex justify-between items-center"><h4 class="font-bold text-lg text-blue-700">${place.place_name}</h4><span class="font-semibold text-gray-800 bg-gray-200 px-3 py-1 rounded-full text-sm">${place.distance}m</span></div><div class="mt-2 text-sm text-gray-700"><span>${typeInfo.name}</span></div></div>`; facilityList.innerHTML += cardHTML; }); displayMap(results.facilities, centerLat, centerLon); }
        
        function displayMap(facilities, centerLat, centerLon) {
            mapContainer.classList.remove('hidden');
            const centerPosition = new kakao.maps.LatLng(centerLat, centerLon);
            const mapOption = { center: centerPosition, level: 5 };
            map = new kakao.maps.Map(mapContainer, mapOption);

            // v10.0: ì‚¬ìš©ì ë§ˆì»¤ ì´ë¯¸ì§€ë¥¼ ì½”ë“œì— ë‚´ì¥ëœ ë°ì´í„° URIë¡œ ë³€ê²½
            const userMarkerImage = new kakao.maps.MarkerImage(
                'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARRSURBVHhe7ZtNbxxVFMf/O4f5MKKtS6tQKg5VoorgIajgH4BQUBAkLhX5QYg4cODABQeKDzhy4MAFl4pERUQiIiAiNEiKkpbAqsQuuxnbGTOzM/M2fF/v9bC3s2/Gzjw/SXZnsrMze/N9v/feG29Pz/pX+b6cAI0wHWM4w3Q2oVb4fB+F4XCNmQnL0AhLgJ7hLMAxDC0HWDV+fzdB2y4K14/D6A6h3RZw1b/hG7pBGAX/v4T7h2Ed2v4FvP7B3w9v6A9hBF58hD78B2EEXnwgjA5M4e3/RRD6u2EM2m1C8+UqfP8lI3qM8xSGFQNZggW+b7P0vJvQpG7T+rYmWz09y2W0bO2u7J59+fK45qfB1xO42X/Ld3y7l9K1/3iK1fF5xT4sVq02rWzU930e+G7gQx/4yD6Gz5+R/d8yLz804uT61sE9T6m2q9a1aR2W3S/5vubB43sHDO0+7f369rVjTz5x4oI2Wvj+XQTTGDb9L/u+H8q8s/XG+Xf29lS2X6naq/qC1nL7S/3f5fuaC48tOf72+fPnL37h8d/X1i5fWb++s3B56+C6r88vX19b+kPfe/rsuVf3b/sP/o//Oqgbf/V4y/n3/X/g+8sJ0AjLgA44B/f5R2E0p+qP+X7fCO1A6A6F4RvE4RzDCUqG38+4DMP6V/l+OQEaYQHQ5wY8zOq4+T5dI+oPwnC7mQn/4hH+h+t3hG27KPAxDB8s/7u4/j1C+1d4/jP+d3B9B/y/KPA+G/yP4foP6N+PBP+j2R4M1h8G/+O4fjfI/4fT+T53Iu/vYfB+Du/vYTB/x3B996J+YfA8B+vvg/k7guv/EPz4D8H3Q/473O/73Q3+Lwe/e0P//R3B93f5fn53C+8vg/k/vB/fjf6d6/6/cHg/7v5/4Pv94D6H+30g+N+P3z94//39g/k/fO/4/Yd+z/f+z2H8jv/8T+f33f6+l+c/+H7f3x+D+w+D7/f1n4LrvxT+f6T7+f9v2P9j2n7t8H7t/g/P307g+3kS/743+X7fLz/h8H4O16/5fn93z+P7d6/4/d1d+P7uPfj93S3C4P0cnj/B9XN4P+7vP+f5e/A/5n6e6/6fwvV/+V+s70f6fxfXfw3/Lwf/H9L1+/uP/B/S/X3/R6P/LwT/o9nfF/3/g+t/EfxvW/frfwTfT+X4P1z/P/m+76uP4Prv+V/B/wV9v+8n8H1fM/j+b43g+z8G85+c/3f+p3f9D2F8x/+D/x3+8T/XfwjDeT/n/w+h3z/c/6Hfj4T6+3kO7++n9n32g38O999n7/j93Q3+/5P7v0f/O/7/Lq//wvt5Lu/n9n/O+1/89+P3813+/zHn/qHfj8L1P0gXo3399gT+fx/+x3B/L6D/c/h99vtB8P9T+z+U/w8M8v/Q5wzWvwfD/w5/Fv5fn7w/6vfr/wPDeCjwPgT/o/m+bwR+v39b8H0W/H6Qf3sZ+u8I3w+E5n8O/H6Qf5/9b4v+e/Lz3+P7f/h/kP/e/Jwf7t9+/t8S/+9x/rfn/v3B//uY5/+L/w34/b7w/wP+/0n+P/i+l/A///tJ/j/wP/L/g77fA+832f9/P/D7+98J+B+c3/tB/j/P/xv+X/B+D98Pgv/P/8u27/+A//s/rD/S/YtJ/9m7+g8Q+B39k6t3AAAAAElFTSuQmCC',
                new kakao.maps.Size(40, 40),
                { offset: new kakao.maps.Point(20, 40) }
            );
            const userMarker = new kakao.maps.Marker({
                position: centerPosition,
                image: userMarkerImage
            });
            userMarker.setMap(map);
            markers.push(userMarker);

            facilities.forEach(place => {
                const position = new kakao.maps.LatLng(place.y, place.x);
                const typeInfo = amenityConfig[place.amenityType] || amenityConfig.default;
                const markerImage = new kakao.maps.MarkerImage(typeInfo.icon, new kakao.maps.Size(32, 32));
                const marker = new kakao.maps.Marker({ map: map, position: position, image: markerImage });
                const iwContent = `<div style="padding:5px; font-size:12px; max-width: 250px;"><div style="font-weight:bold; color:#0d6efd;">${place.place_name}</div><div>(${typeInfo.name})</div><div>ê±°ë¦¬: ${place.distance}m</div></div>`;
                const infowindow = new kakao.maps.InfoWindow({ content: iwContent });
                kakao.maps.event.addListener(marker, 'mouseover', () => infowindow.open(map, marker));
                kakao.maps.event.addListener(marker, 'mouseout', () => infowindow.close());
                markers.push(marker);
            });
        }

        function displayNotFound() { displayResult(); resultMessage.innerHTML = `<span class="text-yellow-600 font-bold">ğŸ§ ì£¼ë³€ 500m ë‚´ì— ì£¼ìš” í¸ì˜ì‹œì„¤ ì •ë³´ê°€ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šì•„ìš”.</span>`; summaryBriefing.innerHTML = ''; facilityList.innerHTML = ''; clearMap(); }
        function displayError(message) { displayResult(); resultMessage.innerHTML = `<span class="text-red-600 font-bold">âš ï¸ ${message}</span>`; summaryBriefing.innerHTML = ''; facilityList.innerHTML = ''; clearMap(); }
    </script>
</body>
</html>